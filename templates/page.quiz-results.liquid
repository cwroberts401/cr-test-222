<script>
  
</script>
{{ 'template-collection.css' | asset_url | stylesheet_tag }}
{{ 'component-card.css' | asset_url | stylesheet_tag }}
{{ 'component-price.css' | asset_url | stylesheet_tag }}

{%- comment -%} Capture the content from header {%- endcomment -%}
{%- capture contentForQuerystring -%}{{ content_for_header }}{%- endcapture -%}

{%- assign pageUrl= contentForQuerystring | split:'"pageurl":"' | last | split:'"' | first | split:'.myshopify.com' | last | split:'?' | last |
   url_decode | split:"\u0026"
-%}
{% comment %} we can assume keys and values are at same index so we crete 2 arrays {% endcomment %}
{% assign row_length = "" %}
{% assign display_oos = "" %}
{% assign show_hero = "" %}
{% assign product_handles = "" %}

{% comment %}Loop through each item, split by '=', and add to respective arrays{% endcomment %}
{% for item in pageUrl %}
  {% assign key_value_pair = item | split: "=" %}
  {% if key_value_pair[0] == "row_length" %}
    {% assign row_length = key_value_pair[1] %}
  {% elsif key_value_pair[0] == "display_oos" %}
    {% assign display_oos = key_value_pair[1] %}
  {% elsif key_value_pair[0] == "show_hero" %}
    {% assign show_hero = key_value_pair[1] %}
  {% elsif key_value_pair[0] == "product_handles" %}
    {% assign product_handles = key_value_pair[1] %}
  {% endif %}
{% endfor %}

<p>{{ row_length }}</p>
<p>{{ display_oos }}</p>
<p>{{ show_hero }}</p>
<p>{{ product_handles }}</p>

Page URL without request host: {{ pageUrl }}
{% for queryString in pageUrl %}
  
{% endfor %}
{% for param in params %}
  {% assign paramKey = param | split:"=" | first %}
  {% assign paramVal = param | split:"=" | slice: 1 %}
  <p>{{ paramKey }}:{{ paramVal }}</p><br>
  {% if paramKey == "hide_oos" and paramVal.first == "true" %}
    <p>hide oos</p>
  {% elsif paramKey == "row_length" and paramVal.first %}
    <p>row length {{ paramVal }}</p>
  {% elsif paramKey == "show_hero" and paramVal.first == "true" %}
    <p>show hero</p>
  {% elsif paramKey == "product_handles" and paramVal %}
    {% assign prods = paramVal.first | split: "," %}
    <ul id="product-grid" class="grid product-grid grid--3-col-tablet-down grid--3-col-desktop">
    {% for prod in prods %}
        {% assign prodObj = all_products[prods[forloop.index0]] %}
      <li class="grid__item">
        {% render 'card-product', card_product: prodObj %}
      </li>
    {% endfor %}
    </ul>
  {% endif %}
{% endfor %}
