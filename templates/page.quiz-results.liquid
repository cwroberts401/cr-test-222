<script>
  
</script>
{{ 'template-collection.css' | asset_url | stylesheet_tag }}
{{ 'component-card.css' | asset_url | stylesheet_tag }}
{{ 'component-price.css' | asset_url | stylesheet_tag }}

{%- capture contentForQuerystring -%}{{ content_for_header }}{%- endcapture -%}

{% comment %} Use string splitting to pull the value from content_for_header and apply some string clean up {% endcomment %}

{%- assign pageUrlWithHost = contentForQuerystring | split:'"pageurl":"' | last | split:'"' | first |
   replace:'\/','/' | 
   replace:'%20',' ' | 
   replace:'\u0026','&'
-%}
{%- assign params = pageUrlWithHost | split:"?" | last | split:"&" -%}
Full URL:  {{ pageUrlWithHost }}
{% for param in params %}
  {% assign paramKey = param | split:"=" | first %}
  {% assign paramVal = param | split:"=" | slice: 1 %}
  <p>{{ paramKey }}:{{ paramVal }}</p><br>
  {% if paramKey == "hide_oos" and paramVal.first == "true" %}
    <p>hide oos</p>
  {% elsif paramKey == "row_length" and paramVal.first %}
    <p>row length {{ paramVal }}</p>
  {% elsif paramKey == "show_hero" and paramVal.first == "true" %}
    <p>show hero</p>
  {% elsif paramKey == "product_handles" and paramVal %}
    <p>{{ paramVal }}</p>
    {% assign prods = paramVal.first | split: "," %}
    <p>{{ prods }}</p>
    <ul
              id="product-grid"
              class="
                grid product-grid grid--3-col-tablet-down
                grid--3-col-desktop
              "
            >
    {% for prod in prods %}
        <p>{{ prods }}</p> <br>
        {% assign prodObj = all_products[prods[forloop.index0]] %}
      <li class="grid__item">
        {% render 'card-product', card_product: prodObj %}
      </li>
    {% endfor %}
    </ul>
  {% endif %}
{% endfor %}
{{ request.product_handles }}
